<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель</title>
    <link rel="stylesheet" href="/static/css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="admin-header">
            <h1><i class="fas fa-shield-alt"></i> Админ-панель</h1>
            <div class="header-actions">
                <button id="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Выйти</button>
            </div>
        </header>
        
        <div class="actions">
            <button onclick="showRegisterModal()"><i class="fas fa-user-plus"></i> Добавить пользователя</button>
    </div>

        <div id="usersContainer">
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Загрузка пользователей...</p>
            </div>
        </div>
    </div>

    <!-- Модальное окно для добавления пользователя -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2><i class="fas fa-user-plus"></i> Добавить пользователя</h2>
            <form id="addUserForm">
                <div class="form-group">
                    <label for="username"><i class="fas fa-user"></i> Имя пользователя:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> Пароль:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit"><i class="fas fa-plus-circle"></i> Добавить</button>
            </form>
        </div>
    </div>

    <!-- Модальное окно для добавления Telegram аккаунта -->
    <div id="telegramModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('telegramModal')">&times;</span>
            <h2><i class="fab fa-telegram"></i> Добавить Telegram аккаунт</h2>
            <form id="addTelegramForm">
                <div class="form-group">
                    <label for="api_id"><i class="fas fa-key"></i> API ID:</label>
                    <input type="text" id="api_id" name="api_id" required>
                </div>
                <div class="form-group">
                    <label for="api_hash"><i class="fas fa-hashtag"></i> API Hash:</label>
                    <input type="text" id="api_hash" name="api_hash" required>
                </div>
                <div class="form-group">
                    <label for="phone"><i class="fas fa-phone"></i> Номер телефона:</label>
                    <input type="text" id="phone" name="phone" required placeholder="+79XXXXXXXXX">
            </div>
                <div class="form-group">
                    <label for="proxy"><i class="fas fa-network-wired"></i> Прокси (опционально):</label>
                    <input type="text" id="proxy" name="proxy" placeholder="socks5://user:pass@host:port">
                </div>
                <div class="form-group">
                    <label for="session_file"><i class="fas fa-file"></i> Файл сессии (опционально):</label>
                    <input type="file" id="session_file" name="session_file">
                    <small>Загрузите файл .session, если уже авторизованы в этом аккаунте</small>
                </div>
                <button type="submit"><i class="fas fa-plus-circle"></i> Добавить</button>
            </form>
            
            <!-- Блок для авторизации через код -->
            <div id="telegramAuthBlock" style="display: none;">
                <h3><i class="fas fa-shield-alt"></i> Авторизация аккаунта</h3>
                <p>На указанный номер телефона отправлен код подтверждения. Введите его ниже:</p>
                <div class="form-group">
                    <label for="auth_code"><i class="fas fa-lock"></i> Код авторизации:</label>
                    <input type="text" id="auth_code" placeholder="12345">
                </div>
                <button id="submitAuthCode"><i class="fas fa-check-circle"></i> Подтвердить</button>
                <p id="authStatus"></p>
            </div>
            
            <!-- Блок для 2FA -->
            <div id="telegram2FABlock" style="display: none;">
                <h3><i class="fas fa-shield-alt"></i> Двухфакторная аутентификация</h3>
                <p>Для этого аккаунта настроена двухфакторная аутентификация. Введите пароль:</p>
                <div class="form-group">
                    <label for="two_fa_password"><i class="fas fa-key"></i> Пароль 2FA:</label>
                    <input type="password" id="two_fa_password">
                </div>
                <button id="submit2FA"><i class="fas fa-check-circle"></i> Подтвердить</button>
                <p id="twoFAStatus"></p>
            </div>
        </div>
    </div>

    <!-- Модальное окно для добавления VK аккаунта -->
    <div id="vkModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('vkModal')">&times;</span>
            <h2><i class="fab fa-vk"></i> Добавить VK аккаунт</h2>
            <form id="addVkForm">
                <div class="form-group">
                    <label for="token"><i class="fas fa-key"></i> API токен:</label>
                    <input type="text" id="token" name="token" required placeholder="vk1.a.XcvBnMasd...">
                    <small>Токен можно получить в настройках приложения VK или через <a href="https://vkhost.github.io/" target="_blank">VK Host</a></small>
                </div>
                <div class="form-group">
                    <label for="proxy"><i class="fas fa-network-wired"></i> Прокси (опционально):</label>
                    <input type="text" id="proxy" name="proxy" placeholder="socks5://user:pass@host:port">
                </div>
                <button type="submit"><i class="fas fa-plus-circle"></i> Добавить</button>
            </form>
        </div>
    </div>

    <script src="/static/js/admin.js"></script>
<script>
        // Функция выхода
    function logout() {
        localStorage.removeItem('adminKey');
            document.cookie = "admin_key=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            window.location.href = '/login';
        }
</script>
</body>
</html> 